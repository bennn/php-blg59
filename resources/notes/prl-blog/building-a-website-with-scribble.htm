<!DOCTYPE html>
<!-- saved from url=(0072)http://prl.ccs.neu.edu/blog/2017/05/23/building-a-website-with-scribble/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    
    <title>Building a Website with Scribble</title>
    <meta name="description" content="The source code for the PRL website is written using Scribble, the Racket  documentation tool. I am very happy with this choice, and you should be too!...">
    <meta name="author" content="PRL">
    <meta name="keywords" content="Scribble, tutorial, by Ben Greenman">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="http://prl.ccs.neu.edu/img/favicon.ico">
    <link rel="canonical" href="http://prl.ccs.neu.edu/blog/2017/05/23/building-a-website-with-scribble/">
    <link rel="next" href="http://prl.ccs.neu.edu/blog/2017/05/15/artifacts-for-semantics/">
    <link rel="prev" href="http://prl.ccs.neu.edu/blog/2017/05/24/programming-language-conference-in-russia/">
    <script src="./src/cb=gapi.loaded_1" async=""></script><script src="./src/cb=gapi.loaded_0" async=""></script><script id="twitter-wjs" src="./src/widgets.js"></script><script type="text/javascript" async="" src="./src/MathJax.js">
    </script>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="./src/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./src/pygments.css">
    <link rel="stylesheet" type="text/css" href="./src/custom.css">
    <link rel="stylesheet" type="text/css" href="./src/racket.css">
    <link rel="stylesheet" type="text/css" href="./src/scribble.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="http://prl.ccs.neu.edu/blog/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml" href="http://prl.ccs.neu.edu/blog/feeds/all.rss.xml" title="RSS Feed">
  <script type="text/javascript" charset="utf-8" async="" src="./src/button.3ebb4253c7cb2cc3c9eaac42044fc82c.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
  <body id="pn-top" class="subpages"><div id="MathJax_Message" style="display: none;"></div>
    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="row">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li role="presentation"><a href="http://prl.ccs.neu.edu/">Home</a></li>
              <li role="presentation"><a href="http://prl.ccs.neu.edu/people.html">People</a></li>
              <li role="presentation"><a href="http://prl.ccs.neu.edu/teaching.html">Teaching</a></li>
              <li role="presentation"><a href="http://prl.ccs.neu.edu/seminars.html">Seminars</a></li>
              <li role="presentation"><a href="http://prl.ccs.neu.edu/software.html">Software</a></li>
              <li role="presentation"><a href="http://prl.ccs.neu.edu/publications.html">Publications</a></li>
              <li role="presentation"><a href="http://prl.ccs.neu.edu/new-members.html">New Members</a></li>
              <li role="presentation"><a href="http://prl.ccs.neu.edu/contact.html">Contact</a></li>
              <li role="presentation" class="active"><a href="http://prl.ccs.neu.edu/blog/index.html">Blog</a></li>
            </ul>
          </div><!--/.navbar-collapse -->
        </div>
      </div>
    </nav>
    <div class="jumbotron subpages">
      <div class="container">
        <div class="row">
          <a style="text-decoration:none; color:white" href="http://prl.ccs.neu.edu/blog/index.html">
            <div class="col-md-12">
              <h1>Inside PRL</h1>
              <p>Reading between the parentheses</p>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div class="pn-main-wrapper">
      <div class="content">
        <div class="container">
          <div class="row">

            <!-- Main column -->
            <div id="content" class="col-md-12">



              <article>
  <header>
    <h1>Building a Website with Scribble</h1>
    <p class="date-and-tags">
<time datetime="2017-05-23" pubdate="true">2017-05-23</time> :: <span class="tags"><a href="http://prl.ccs.neu.edu/blog/tags/Scribble.html">Scribble</a>, <a href="http://prl.ccs.neu.edu/blog/tags/tutorial.html">tutorial</a>, <a href="http://prl.ccs.neu.edu/blog/tags/by-Ben-Greenman.html">by Ben Greenman</a></span></p>
  </header>

<p>The source code for the PRL website is written using Scribble, the Racket  documentation tool. I am very happy with this choice, and you should be too!</p>
<!-- more-->

<h2 id="the-story-so-far">The Story so Far</h2>

<p>Last Fall, I took a flight to Chicago (on my way to <a href="http://con.racket-lang.org/2016/">RacketCon 2016</a>). When I landed, there was a new message in my inbox:</p>

<pre><code>    Subject: Web Page
    Date: 2016-09-15

    You have been nominated webmaster by public acclamation. Congratulations!</code></pre>

<p>Emboldened by the trust of my people, I promptly converted the PRL website  from Racket-generating-HTML to the fine <a href="http://docs.racket-lang.org/scribble-pp/html.html"><code>scribble/html</code></a>  preprocessor language (commit <a href="https://github.com/nuprl/website/commit/a0600d32fec4bd70c5530b2717aec32979d634f7"><code>a0600d</code></a>) This bold action polarized the community.</p>

<blockquote>
 <p>I can’t read the source anymore! Is this really an improvement?</p></blockquote>

<p>Fear not, citizens. The switch to <a href="http://docs.racket-lang.org/scribble-pp/html.html"><code>scribble/html</code></a> was the right choice, and you  too can learn to read the source code.</p>

<h2 id="how-to-read-scribblehtml-programs">How to Read <code>scribble/html</code> Programs</h2>

<h3 id="basics">Basics</h3>

<p>Scribble is a language for writing Racket documentation. The key innovation in Scribble is the <em>@-expression</em> (read: “at expression”). The <a href="http://docs.racket-lang.org/scribble-pp/html.html"><code>scribble/html</code></a> language combines @-expression syntax with  functions that generate HTML.</p>

<h4 id="-syntax">@-syntax</h4>

<p><a href="http://www.greghendershott.com/2015/08/at-expressions.html">Greg Hendershott</a> and the <a href="http://docs.racket-lang.org/scribble/reader.html">Scribble Documentation</a> explain @-expressions properly. Here’s a short tutorial (Part 1 of 2, “the basics”):</p>

<ul>
 <li>Scribble programs start in “text mode”.  Every character you type goes straight to the document you are building.</li>
 <li>The @-sign toggles to “Racket mode” for the next expression.  In Racket mode, the characters you type will be evaluated as a Racket program  to produce part of the document.</li></ul>

<p><em>Examples:</em> Evaluating <code>"Hello Dave"</code> puts “Hello Dave” in your document. Evaluating <code>"Hello @Dave"</code> puts “Hello ???” in your document, where "???" is the value of the variable <code>Dave</code>. Finally if <code>Dave</code> is the name of a function, then <code>"Hello @(Dave)"</code> calls the <code>Dave</code> function with zero arguments and puts whatever it returns into your document.</p>

<p>To make it easy to interleave text, function calls, and code, Scribble  discriminates between 4 kinds of parentheses when they follow an @-sign (Part 2 of 2, “the parens”):</p>

<ul>
 <li><code>@(f A B)</code> is just like the function call <code>(f A B)</code> in Racket</li>
 <li><code>@f[A B]</code> is the same as <code>@(f A B)</code>, but typically more useful because …</li>
 <li><code>@f[A B]{....}</code> evaluates the <code>....</code> in “text mode” to a list of words <code>w*</code>,  then calls <code>f</code> just like <code>(apply f A B w*)</code></li>
 <li><code>@f{....}</code> evaluates the <code>....</code> in “text mode” and calls <code>f</code> with the results</li>
 <li><code>@f|{....}|</code> is similar, but the <code>....</code> are in “unescapable text mode”</li></ul>

<p>“Unescapable text mode” treats @-signs as text instead of toggling between modes.</p>

<h4 id="generating-html">Generating HTML</h4>

<p>The <a href="http://docs.racket-lang.org/scribble-pp/html.html"><code>scribble/html</code></a> language comes with functions that render HTML. These functions have the same name as the corresponding HTML tag.</p>

<p>Example program:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="kn">#lang scribble/html</span>
<span class="nv">@p</span><span class="p">{</span><span class="nf">Hello</span> <span class="nv">World</span><span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Running this program prints:</p>

<div class="brush: html">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nt">&lt;p&gt;</span>Hello World<span class="nt">&lt;/p&gt;</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>No surprises.</p>

<p>One thing that <em>is</em> surprising is how <code>scribble/html</code> handles tag attributes. Every tag-rendering function accepts “Racket mode” arguments that specify  an attribute name and attribute value.</p>

<p>For example:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="kn">#lang scribble/html</span>
<span class="nv">@p</span><span class="p">[</span><span class="nf">style:</span> <span class="s">"color:red"</span><span class="p">]{</span><span class="nf">Hello</span> <span class="nv">World</span><span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Prints:</p>

<div class="brush: html">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nt">&lt;p</span> <span class="na">style=</span><span class="s">"color:red"</span><span class="nt">&gt;</span>Hello World<span class="nt">&lt;/p&gt;</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Hope the output looks familiar. The input syntax is strange, but that’s what it is.</p>

<p>Larger programs print larger webpages. Each page on the PRL website is HTML generated by one <code>scribble/html</code> program.</p>

<h2 id="why-scribblehtml-is-an-improvement">Why <code>scribble/html</code> is an Improvement</h2>

<p>Before <code>scribble/html</code>, the PRL website was implemented in <code>scribble/text</code>. A <code>scribble/text</code> program renders and prints text. There is no extra support for HTML.</p>

<p>To compare, here’s the start of the old homepage:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7
8
9</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="kn">#lang scribble/text</span>
<span class="nv">@</span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._require))" style="color: inherit">require</a> </span><span class="s">"templates.rkt"</span><span class="p">)</span>

<span class="nv">&lt;!DOCTYPE</span> <span class="nv">html&gt;</span>
<span class="nv">&lt;html</span> <span class="nv">lang=</span><span class="s">"en"</span><span class="nv"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span>
  <span class="nv">@</span><span class="p">(</span><span class="nf">header</span> <span class="s">"Home"</span><span class="p">)</span>
  <span class="nv">&lt;body</span> <span class="nv">id=</span><span class="s">"pn-top"</span><span class="nv"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span>
    <span class="nv">@</span><span class="p">(</span><span class="nf">navbar</span> <span class="s">"Home"</span><span class="p">)</span>
    <span class="nv">&lt;div</span> <span class="nv">class=</span><span class="s">"jumbotron"</span><span class="nv"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>And here is the start of the <code>scribble/html</code>’d homepage:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7
8
9</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="kn">#lang scribble/html</span>
<span class="nv">@require</span><span class="p">[</span><span class="s">"templates.rkt"</span><span class="p">]</span>

<span class="nv">@doctype</span><span class="p">{</span><span class="nf">html</span><span class="p">}</span>
<span class="nv">@html</span><span class="p">[</span><span class="nf">lang:</span> <span class="s">"en"</span><span class="p">]{</span>
  <span class="nv">@header</span><span class="p">{</span><span class="nf">Home</span><span class="p">}</span>
    <span class="nv">@body</span><span class="p">[</span><span class="nf">id:</span> <span class="s">"pn-top"</span><span class="p">]{</span>
      <span class="nv">@navbar</span><span class="p">{</span><span class="nf">Home</span><span class="p">}</span>
      <span class="nv">@div</span><span class="p">[</span><span class="nf">class:</span> <span class="s">"jumbotron"</span><span class="p">]{</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The pages look similar. The new one has more @-signs and parentheses, the old one has more <code>&lt;</code>-signs  and quotes. If you were able to edit the old page, you should be able to edit the new page.</p>

<p>The <strong>key improvement</strong> in the new page is that <strong>common mistakes are now  compile-time errors</strong>.</p>

<ul>
 <li>
  <p>Before, a typo like <code>&lt;hmtl&gt;</code> would generate an ugly webpage.  After, a typo like <code>@hmtl</code> is a syntax error.</p></li>
 <li>
  <p>Before, a typo like <code>&lt;b&gt;....</code> with no closing tag would generate an ugly webpage.  After, a typo like <code>@b{....</code> is a syntax error.</p></li></ul>

<p>Both flavors of error message come with source-code line numbers. This is very very helpful.</p>

<h3 id="small-improvements">Small Improvements</h3>

<h4 id="1-more-functions">1. More Functions</h4>

<p>Before, the <a href="http://prl.ccs.neu.edu/teaching.html">Teaching page</a> contained  some interesting HTML for rendering vertical text (look for the word “Semantics” to see how this was used):</p>

<div class="brush: html">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"how-to-design-programs"</span><span class="nt">&gt;</span>S<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>e<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>m<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>a<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>n<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>t<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>i<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>c<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>s<span class="nt">&lt;br</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;&lt;/span&gt;</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>After, the same text is generated from a function call:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nv">@span</span><span class="p">[</span><span class="nf">class:</span> <span class="s">"how-to-design-programs"</span><span class="p">]{</span><span class="nf">@vertical-text</span><span class="p">{</span><span class="nf">Semantics</span><span class="p">}}</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The <code>vertical-text</code> function is simple:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nv">@require</span><span class="p">[(</span><span class="nf"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._only-in))" style="color: inherit">only-in</a></span> <span class="nv">racket/list</span> <span class="nv"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._add-between))" style="color: inherit">add-between</a></span><span class="p">)]</span>

<span class="nv">@</span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a> </span><span class="p">(</span><span class="nf">vertical-text</span> <span class="o">.</span> <span class="nv">str*</span><span class="p">)</span>
   <span class="p">(</span><span class="nf"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._add-between))" style="color: inherit">add-between</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/strings.html#(def._((quote._~23~25kernel)._string-~3elist))" style="color: inherit">string-&gt;list</a> </span><span class="p">(</span><span class="nf"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._append*))" style="color: inherit">append*</a></span> <span class="nv">str*</span><span class="p">))</span> <span class="p">(</span><span class="nf">br</span><span class="p">)))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h4 id="2-more-structure-less-boilerplate">2. More Structure, Less Boilerplate</h4>

<p>Here’s part of the old definition of “Ben Greenman” on the <a href="http://prl.ccs.neu.edu/people.html">People page</a>:</p>

<div class="brush: html">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row pn-person"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12 pn-row-eq-height"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-3 pn-photo"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"img-wrapper"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"img/ben_greenman.jpg"</span> <span class="na">title=</span><span class="s">"Ben Greenman"</span> <span class="na">alt=</span><span class="s">"Ben Greenman"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-9"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4 pn-contact"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"pn-name"</span><span class="nt">&gt;</span>Ben Greenman<span class="nt">&lt;/span&gt;&lt;br</span> <span class="nt">/&gt;</span>
        Advisor: Matthias Felleisen<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"mailto:types@"</span><span class="err">@"</span><span class="na">ccs</span><span class="err">.</span><span class="na">neu</span><span class="err">.</span><span class="na">edu</span><span class="err">"</span><span class="nt">&gt;</span>types@"@"ccs.neu.edu<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://www.ccs.neu.edu/home/types"</span><span class="nt">&gt;</span>www.ccs.neu.edu/home/types<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-3 pn-muted col-md-offset-5"</span><span class="nt">&gt;</span>
        Joined 2014
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12 pn-bio"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>I like constructions .... <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The new definition uses a helper function with keyword arguments for each  “field” of the person:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7
8</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nv">@person</span><span class="p">[</span><span class="kd">#:name</span> <span class="s">"Ben Greenman"</span>
        <span class="kd">#:title</span> <span class="s">"Advisor: Matthias Felleisen"</span>
        <span class="kd">#:e-mail</span> <span class="s">"types@ccs.neu.edu"</span>
        <span class="kd">#:website</span> <span class="s">"http://ccs.neu.edu/home/types"</span>
        <span class="kd">#:history</span> <span class="nv">@list</span><span class="p">[</span><span class="s">"Joined 2014"</span><span class="p">]</span>
        <span class="kd">#:img</span> <span class="s">"ben_greenman.jpg"</span><span class="p">]{</span>
  <span class="nv">I</span> <span class="nv">like</span> <span class="nv">constructions</span> <span class="o">....</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h4 id="3-less-string-formatting">3. Less String-Formatting</h4>

<p>Before, the code did a lot of string formatting (<a href="https://github.com/nuprl/website/commit/a0600d#diff-1921e33ce89be28dd277cf1c7880d1beL9">link</a>):</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a> </span><span class="p">(</span><span class="nf"><a href="http://docs.racket-lang.org/reference/creatingunits.html#(form._((lib._racket/unit..rkt)._link))" style="color: inherit">link</a></span> <span class="nv">url</span> <span class="nv">body</span><span class="p">)</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/strings.html#(def._((quote._~23~25kernel)._string-append))" style="color: inherit">string-append</a> </span><span class="s">"&lt;a href=\""</span> <span class="nv">url</span> <span class="s">"\"&gt;"</span> <span class="nv">body</span> <span class="s">"&lt;/a&gt;"</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The new code has no need for such helper functions.</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span class="nv">@a</span><span class="p">[</span><span class="nf">href:</span> <span class="nv">url</span> <span class="nv">body</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h4 id="bottom-line">Bottom Line</h4>

<p>Scribble is a good language for making static HTML pages.</p>

<hr>

<p><em>If you liked this post, you may also be interested in:</em></p>

<ul>
 <li><a href="http://docs.racket-lang.org/pollen/index.html">Pollen</a></li>
 <li><a href="https://github.com/vishesh/racketscript">RacketScript</a></li>
 <li>Other websites built using <a href="http://docs.racket-lang.org/scribble-pp/html.html"><code>scribble/html</code></a>:  (1) <a href="http://nanopass.org/">nanopass.github.io</a> (<a href="https://github.com/nanopass/nanopass.github.io">source code</a>),  (2) <a href="http://prl.ccs.neu.edu/gtp/">Gradual Typing Across the Spectrum</a> (<a href="https://github.com/nuprl/gtp">source code</a>).</li>
 <li><a href="http://prl.ccs.neu.edu/blog/2016/05/18/gradual-typing-across-the-spectrum/">Notes from a Gradual Typing Across the Spectrum PI meeting</a></li></ul>
  <br><br>
  <footer>
    <script type="text/javascript">
      !function(d,s,id){
          var js,fjs=d.getElementsByTagName(s)[0];
          if(!d.getElementById(id)){
              js=d.createElement(s);
              js.id=id;
              js.src="//platform.twitter.com/widgets.js";
              fjs.parentNode.insertBefore(js,fjs);
          }
      }(document,"script","twitter-wjs");
    </script>
    <iframe id="twitter-widget-1" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" title="Twitter Tweet Button" src="./src/tweet_button.4ddf50b7ac5c5f06f6679f003b742641.en.html" style="position: static; visibility: visible; width: 61px; height: 20px;" data-url="http://prl.ccs.neu.edu/blog/2017/05/23/building-a-website-with-scribble/"></iframe>
    <script type="text/javascript" src="./src/plusone.js" gapi_processed="true"></script>
    <div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 32px; height: 20px;"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 32px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I0_1538529414849" name="I0_1538529414849" src="./src/fastbutton.html" data-gapiattached="true" title="G+"></iframe></div>
    <ul class="pager">
    <li class="previous">
      <a href="http://prl.ccs.neu.edu/blog/2017/05/24/programming-language-conference-in-russia/">← <em>Programming Language Conference in Russia</em></a>
    </li>
    <li class="next">
      <a href="http://prl.ccs.neu.edu/blog/2017/05/15/artifacts-for-semantics/"><em>Artifacts for Semantics</em> →</a>
    </li>
    </ul>
  </footer>
</article>
            </div>
          </div>
        </div>
        <footer class="footer">
          <hr>
          <p><iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-follow-button twitter-follow-button-rendered" title="Twitter Follow Button" src="./src/follow_button.4ddf50b7ac5c5f06f6679f003b742641.en.html" style="position: static; visibility: visible; width: 114px; height: 20px;" data-screen-name="neu_prl"></iframe>
             <script type="text/javascript">
               !function(d,s,id){
                   var js,fjs=d.getElementsByTagName(s)[0];
                   if(!d.getElementById(id)){
                       js=d.createElement(s);
                       js.id=id;
                       js.src="//platform.twitter.com/widgets.js";
                       fjs.parentNode.insertBefore(js,fjs);
                   }
               }(document,"script","twitter-wjs");
             </script></p>
          <p>Blog generated
          by <a href="https://github.com/greghendershott/frog">Frog</a>,
          using <a href="http://twitter.github.com/bootstrap/index.html">Bootstrap</a>.</p>
          <p>© Copyright Programming Research Laboratory 2015-2016 | made by <a href="http://www.catchexception.cz/" target="_blank">Catchexception s.r.o.</a> | source on <a href="https://github.com/nuprl/website">GitHub</a></p>
        </footer>
      </div>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="./src/jquery.min.js"></script>
    <script type="text/javascript" src="./src/bootstrap.min.js"></script>
    <script type="text/javascript" src="./src/custom.js"></script>
    <script type="text/javascript" src="./src/analytics.js"></script>
  
<iframe scrolling="no" frameborder="0" allowtransparency="true" src="./src/widget_iframe.4ddf50b7ac5c5f06f6679f003b742641.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe name="oauth2relay320283077" id="oauth2relay320283077" src="./src/postmessageRelay.html" tabindex="-1" aria-hidden="true" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./src/saved_resource.html"></iframe></body></html>
